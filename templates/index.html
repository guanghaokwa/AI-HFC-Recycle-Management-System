{% extends 'base.html' %}

{% block content %} 

<h2>Recycle Management</h2>

<div id="upload_form">
    <div>
        <img src="{{ url_for('video_feed') }}" alt="Live Feed" style="width: 20%; border: 2px solid black;">
    </div>
    <form method="POST" style="margin-top: 20px;">
        <!-- <label>Upload a Image</label> -->
        <!-- <input type="file" name="image_upload" id="image_upload" required/> -->
         
        <input type="text" id="form_info" value="{{form_status}}" hidden/>

        <input type="submit" value="Capture Image" />
    </form>
</div>


<!-- <h1>Live Camera Feed</h1>
<div>
    <img src="{{ url_for('video_feed') }}" alt="Live Feed" style="width: 20%; border: 2px solid black;">
</div>
<form action="/capture" method="POST" style="margin-top: 20px;">
    <button type="submit">Capture Image</button>
</form> -->

<div style="text-align: center; display: none;" id="qrcode_container">
    <div>
        <h2>The detected Image is {{ res_string }}</h2>
        <img src="{{ url_for('image_process') }}" alt="QR Code">
    </div>
    
    <a href="/login?pt_check&type={{ res_string }}">
        <img src="{{ url_for('qr_code_image') }}" alt="QR Code">
    </a>
</div>


<script>
    window.onload = () => {
        let str_value = document.getElementById('form_info').value

        if (str_value == 'hide') {
            document.getElementById('upload_form').style.display = "none"
            document.getElementById('qrcode_container').style.display = "block"

            // setTimeout(() => {
            //     document.getElementById('upload_form').style.display = "block"
            //     document.getElementById('qrcode_container').style.display = "none"

            //     document.getElementById('form_info').value = 'not yet'

            //     window.location = '/'
            // }, 60000);
        } else {
            document.getElementById('upload_form').style.display = "block"
            document.getElementById('qrcode_container').style.display = "none"
        }
        
    }
</script>


{% endblock %}


    